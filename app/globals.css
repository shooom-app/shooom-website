/* Tailwind v4 – must be first */
@import "tailwindcss";

/* Your site-wide utilities */
@import "./styles/neon.css";
@import "./styles/animations.css";

/* ===============================
   Base theme
   =============================== */
:root {
  --background: #0a0a0a;
  --foreground: #ededed;

  /* Neon palette */
  --neon: #ff1f57;           /* main red/pink */
  --neon-2: #ff6b9b;         /* secondary pink */

  /* Glow strengths (tweak if needed) */
  --neon-shadow: rgba(255, 31, 87, 0.18);
  --neon-shadow-strong: rgba(255, 31, 87, 0.6);
  --neon-shadow-stronger: rgba(255, 31, 87, 0.85);
}
@media (prefers-color-scheme: light) {
  :root {
    --background: #ffffff;
    --foreground: #171717;
  }
}

html, body { height: 100%; }
body {
  margin: 0;
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-geist-sans, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Inter, Arial);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;

  /* Prevent horizontal shift from decorative halos */
  overflow-x: clip;
}

/* ===============================
   How it works — borderless neon cards
   =============================== */
.hiw-card {
  position: relative;
  background: transparent;
  border-radius: 22px;
  padding: 18px 20px;
  box-shadow: none;
  transition: transform 0.35s ease, filter 0.35s ease;
  isolation: isolate;
}
.hiw-card::before {
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: inherit;
  background: radial-gradient(120px 80px at 25% 15%, rgba(255, 31, 87, 0.28), transparent 60%);
  opacity: 0;
  filter: blur(16px);
  z-index: -1;
  transition: opacity 0.35s ease, filter 0.35s ease;
}
.hiw-card:hover {
  transform: translateY(-4px);
  filter: drop-shadow(0 12px 24px var(--neon-shadow));
}
.hiw-card:hover::before { opacity: 0.9; filter: blur(22px); }

.hiw-icon { width: 54px; height: 54px; display: grid; place-items: center; }

/* ===============================
   Neon Icon Base (used by Search/GPS/Heart)
   =============================== */
.icon-neon {
  width: 54px;
  height: 54px;
  display: grid;
  place-items: center;
  /* soft SVG glow (each SVG defines <filter id="neonGlow">) */
  filter: url(#neonGlow);
}
.np-stroke {
  fill: none;
  stroke: url(#neonGrad);
  stroke-width: 2.75;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.icon-neon .spark {
  fill: url(#neonGrad);
  filter: drop-shadow(0 0 8px var(--neon-shadow-strong));
  opacity: .85;
  animation: np-spark 2.2s ease-in-out infinite;
}
.icon-neon .s1 { animation-delay: 0s; }
.icon-neon .s2 { animation-delay: .3s; }
.icon-neon .s3 { animation-delay: .6s; }
.icon-neon .s4 { animation-delay: .9s; }
.icon-neon .s5 { animation-delay: 1.2s; }
.icon-neon .s6 { animation-delay: 1.5s; }

@keyframes np-spark {
  0%, 100% { transform: translateY(0); opacity: .7; }
  50%      { transform: translateY(-1.5px); opacity: 1; }
}

/* Micro lift on hover */
.hiw-card:hover .icon-neon {
  transition: transform .3s ease;
  transform: translateY(-1px) scale(1.02);
}

/* ===============================
   SEARCH — radar sweep
   =============================== */
.neon-search .ring { stroke-width: 3.25; }
.neon-search .sweep {
  fill: none;
  stroke: url(#neonGrad);
  stroke-width: 2.25;
  stroke-linecap: round;
  stroke-dasharray: 40 140;
  transform-origin: 28px 28px;
  animation: ns-sweep 2.4s ease-in-out infinite;
  opacity: .9;
}
@keyframes ns-sweep {
  0%   { transform: rotate(0);   stroke-dashoffset: 0;   opacity: 0; }
  10%  { opacity: .9; }
  55%  { stroke-dashoffset: -90; }
  100% { transform: rotate(360deg); stroke-dashoffset: -180; opacity: 0; }
}

/* ===============================
   HOST — GPS pin + signal rings
   =============================== */
.neon-gps .dot {
  fill: url(#neonGrad);
  filter: drop-shadow(0 0 8px var(--neon-shadow-strong));
}
.neon-gps .pin { stroke-width: 3; }
.neon-gps .ring1,
.neon-gps .ring2,
.neon-gps .ring3 {
  fill: none;
  stroke: url(#neonGrad);
  stroke-width: 2;
  opacity: 0;
  transform-origin: 32px 48px;
  filter: drop-shadow(0 0 10px var(--neon-shadow-strong));
}
.neon-gps .ring1 { animation: gps-ping 1.8s ease-out 0s  infinite; }
.neon-gps .ring2 { animation: gps-ping 1.8s ease-out .3s infinite; }
.neon-gps .ring3 { animation: gps-ping 1.8s ease-out .6s infinite; }
@keyframes gps-ping {
  0%   { transform: scale(.8); opacity: .9; }
  80%  { opacity: .05; }
  100% { transform: scale(1.2); opacity: 0; }
}

/* ===============================
   MATCH — Heart beat + glow
   =============================== */
.neon-heart .heart {
  stroke-linejoin: round;
  filter: drop-shadow(0 0 10px var(--neon-shadow-strong));
}
.neon-heart .heart-fill {
  fill: url(#neonGrad);
  opacity: .10;
  transform-origin: 32px 32px;
  animation: heart-beat 1.5s ease-in-out infinite;
  filter: drop-shadow(0 0 14px var(--neon-shadow-strong));
}
@keyframes heart-beat {
  0%, 100% { transform: scale(1);   opacity: .10; }
  25%      { transform: scale(1.06); opacity: .22; }
  50%      { transform: scale(1.12); opacity: .30; }
  75%      { transform: scale(1.06); opacity: .22; }
}

/* ===============================
   Role Toggle (DJ ↔︎ Bar)
   =============================== */
.rolewrap {
  display: inline-grid;
  gap: 8px;
  user-select: none;
}
.rolelabels {
  display: grid;
  grid-template-columns: 1fr 1fr;
  font-size: 12px;
  letter-spacing: .02em;
  color: rgba(255,255,255,.55);
}
.rolelabels .rl.on { color: #fff; }

.roletoggle {
  position: relative;
  width: clamp(280px, 60vw, 420px);
  height: 64px;
  border-radius: 999px;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.12);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.04),
    0 12px 28px rgba(255,0,32,.18);
  outline: none;
}
.roletoggle.bar { box-shadow:
  inset 0 0 0 1px rgba(255,255,255,.04),
  0 12px 28px rgba(255,0,32,.26); }

.rt-track {
  position:absolute; inset:0;
  border-radius: inherit;
  background: linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  pointer-events: none;
}
.rt-thumb {
  position: absolute;
  top: 6px;
  left: 6px; /* DJ position */
  width: calc(50% - 12px);
  height: calc(100% - 12px);
  border-radius: 999px;
  background: radial-gradient(120px 80px at 25% 15%, rgba(255,31,87,.28), transparent 60%), rgba(0,0,0,.45);
  box-shadow:
    0 6px 18px rgba(255,31,87,.22),
    inset 0 0 0 1px rgba(255,255,255,.08);
  transition: transform .35s cubic-bezier(.2,.8,.2,1), left .35s cubic-bezier(.2,.8,.2,1), background .3s ease;
  display: grid; place-items: center;
}
.roletoggle.bar .rt-thumb { left: calc(50% + 6px); }

.rt-ico { width: 26px; height: 26px; display:block; }
.rt-ico .stroke { fill: none; stroke: url(#neonGrad); stroke-width: 1.8; stroke-linecap: round; stroke-linejoin: round; }
.rt-ico .fill   { fill: url(#neonGrad); }

.rt-zones { position:absolute; inset:0; display:grid; grid-template-columns: 1fr 1fr; }
.rt-zones > span { cursor: pointer; }

@media (hover:hover) and (pointer:fine) {
  .roletoggle:hover .rt-thumb { transform: translateY(-1px); }
}
@media (prefers-reduced-motion: reduce) {
  .rt-thumb { transition: left .01s linear; }
}

/* Role theming hook via [data-role] */
main[data-role="dj"] .rolelabels .rl:first-child { color: #fff; }
main[data-role="bar"] .rolelabels .rl:last-child { color: #fff; }

/* ===============================
   Performance helpers
   =============================== */
.hiw-card .icon-neon * { animation-play-state: paused; }
@media (hover:hover) and (pointer:fine) {
  .hiw-card:hover .icon-neon * { animation-play-state: running; }
}
/* If you wrap the section in a container that toggles `.inview`, animations run when visible */
.play-when-visible.inview .icon-neon * { animation-play-state: running; }

/* Motion safety */
@media (prefers-reduced-motion: reduce) {
  .neon-search .sweep,
  .neon-gps .ring1, .neon-gps .ring2, .neon-gps .ring3,
  .neon-heart .heart-fill,
  .icon-neon .spark {
    animation: none !important;
  }
  .hiw-card .icon-neon * { animation-play-state: paused !important; }
}

/* ===== Role visibility helpers ===== */
.only-dj,
.only-bar { display: block; }

[data-role="dj"]  .only-bar { display: none !important; }
[data-role="bar"] .only-dj  { display: none !important; }

/* Optional: role-tinted accents */
/*
[data-role="dj"]  { --neon: #e11d48; }
[data-role="bar"] { --neon: #f43f5e; }
*/

/* Slow breathing neon pulse */
@keyframes neonPulse {
  0%, 100% { box-shadow: 0 0 12px rgba(220,38,38,0.55), 0 0 24px rgba(220,38,38,0.35); }
  50%      { box-shadow: 0 0 20px rgba(220,38,38,0.9),  0 0 40px rgba(220,38,38,0.6);  }
}
.animate-neonPulse { animation: neonPulse 2.2s ease-in-out infinite; }

/* One-shot flash that syncs with content transition */
@keyframes flashSync {
  0%   { transform: translateZ(0); filter: brightness(1.0); box-shadow: 0 0 0 rgba(220,38,38,0); }
  35%  { filter: brightness(1.2); box-shadow: 0 0 32px rgba(220,38,38,0.9); }
  100% { filter: brightness(1.0); box-shadow: 0 0 16px rgba(220,38,38,0.5); }
}
.animate-flashSync { animation: flashSync 0.38s cubic-bezier(0.22,1,0.36,1) 1; }

/* === Warm-Up Bubble (tuned) =============================== */
/* Keep for legacy bubble usage */
.bubble {
  width: clamp(340px, 48vmin, 640px);
  aspect-ratio: 1 / 1;
  border-radius: 9999px;
  position: relative;
  overflow: hidden;
  isolation: isolate;
  filter: drop-shadow(0 0 24px color-mix(in oklab, var(--neon) 35%, black));
  box-shadow:
    inset 0 0 48px color-mix(in oklab, var(--neon) 35%, transparent),
    0 0 96px color-mix(in oklab, var(--neon) 25%, transparent);
  border: 1px solid color-mix(in oklab, var(--neon) 28%, white 12%);
}
.bubble::before,
.bubble::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
}
.bubble::before {
  background:
    radial-gradient(120% 120% at 20% 20%, color-mix(in oklab, var(--neon) 90%, transparent) 0%, transparent 60%),
    radial-gradient(120% 120% at 80% 30%, color-mix(in oklab, var(--neon-2) 85%, transparent) 0%, transparent 55%),
    radial-gradient(140% 140% at 50% 80%, color-mix(in oklab, var(--neon) 65%, black 10%) 0%, transparent 65%),
    conic-gradient(from 0deg at 50% 50%, var(--neon), var(--neon-2), var(--neon));
  filter: blur(10px) saturate(130%);
  animation: swirl 18s ease-in-out infinite;
  mix-blend-mode: screen;
}
.bubble::after {
  --wave: radial-gradient(60% 12% at 50% 60%, rgba(255,255,255,0.16) 30%, transparent 60%) no-repeat;
  background:
    var(--wave),
    var(--wave),
    var(--wave);
  background-size: 140% 40%, 160% 36%, 180% 30%;
  background-position: 50% 60%, 45% 63%, 55% 66%;
  mask:
    radial-gradient(70% 70% at 50% 45%, rgba(0,0,0,0.9) 42%, rgba(0,0,0,0.6) 65%, transparent 100%);
  animation: slosh 6s ease-in-out infinite, shimmer 8s linear infinite;
  mix-blend-mode: plus-lighter;
}
@keyframes swirl {
  0%   { transform: translateY(0) rotate(0deg) scale(1); }
  25%  { transform: translateY(-1.5%) rotate(6deg) scale(1.02); }
  50%  { transform: translateY(0.5%) rotate(0deg) scale(0.995); }
  75%  { transform: translateY(1%) rotate(-6deg) scale(1.01); }
  100% { transform: translateY(0) rotate(0deg) scale(1); }
}
@keyframes slosh {
  0%,100% { background-position: 50% 60%, 45% 63%, 55% 66%; }
  50%     { background-position: 52% 63%, 47% 66%, 57% 69%; }
}
@keyframes shimmer {
  0%   { filter: brightness(1); }
  50%  { filter: brightness(1.08); }
  100% { filter: brightness(1); }
}
@media (prefers-reduced-motion: reduce) {
  .bubble::before,
  .bubble::after { animation: none !important; }
}





/* === Warm-Up Orb — soft neon red look ====================== */
.warmup-orb {
  /* Circle & sizing */
  position: relative;
  width: clamp(300px, 44vmin, 560px);
  aspect-ratio: 1 / 1;
  border-radius: 50%;
  overflow: hidden;
  isolation: isolate;

  /* Ambient red vignette (no black disk) */
  background:
    radial-gradient(120% 120% at 50% 45%, rgba(255, 31, 87, 0.16), transparent 70%);

  /* Softer glow */
  box-shadow:
    inset 0 0 30px rgba(255, 31, 87, 0.22),
    0 0 80px rgba(255, 31, 87, 0.18);
}

/* SVG fills the orb */
.warmup-orb .orb-svg {
  position: absolute; inset: 0;
  width: 100%; height: 100%; display: block;
}

/* unified neon palette (smooth, Apple-ish) */
.warmup-orb {
  --slime: color-mix(in oklab, var(--neon) 82%, var(--neon-2) 18%);
  --slime-dark: color-mix(in oklab, var(--slime) 88%, black 8%);
  --slime-light: color-mix(in oklab, var(--slime) 92%, white 8%);
}

/* surface line sheen */
.warmup-orb .wave-line {
  fill: none;
  stroke: url(#surfaceStroke);
  stroke-width: 4.5;
  stroke-linecap: round;
  stroke-linejoin: round;
  filter: drop-shadow(0 0 6px color-mix(in oklab, var(--slime) 40%, transparent));
}

/* labels */
.warmup-orb .orb-label { position:absolute; inset:0; display:grid; place-items:center; text-align:center; pointer-events:none; }
.warmup-orb .percent {
  font-weight: 600; letter-spacing: -0.02em;
  font-size: clamp(40px, 6.8vmin, 72px); color: #fff;
  text-shadow: 0 0 10px color-mix(in oklab, var(--slime) 50%, transparent), 0 0 2px rgba(255,255,255,.18);
}
.warmup-orb .caption { margin-top: .25rem; font-size: clamp(12px, 2vmin, 14px); color: rgba(255,255,255,.9); }
